 #### 20道选择题，10道填空题，10道判断题，5道大题，第五章关系模式1道，第八章故障恢复、并发控制、完整性3道，第十章1道

### 客观题整理：

#### 选择题：

- 不属于静态约束的范畴**定义插入删除等操作的影响**（触发器相关）。
- 下列关于候选键说法错误的是**能唯一决定一个元组的属性集是候选键**（最小属性集）。
- 关系DB中，任何二元关系模式的最高范式必定是**BCNF**
- **逻辑设计**不能独立于数据库管理系统。
- 建立数据字典的时机是**需求分析阶段**
- “为哪些关系，在哪些属性上建立什么样的索引”这一设计内容应属于**物理设计**阶段。
- **安全性**不是事务的ACID四大特性之一。
- 带检查点机制的数据库系统故障后的数据库恢复需要对日志文件进行**3**次扫描。
- 一个数据模型中有基础数据类型、关系类型、元组类型，那这个数据模型是**复合对象模型**。
- 在关系数据库设计中，设计关系模式是**逻辑设计**阶段的任务。
- 局部ER图合并成全局ER图时可能出现冲突，不属于合并冲突的是**语法冲突**（三种冲突：属性冲突、结构冲突、命名冲突）。
- 下列哪一条不是最小函数依赖集的必要条件**函数依赖左端为单属性**。
- 数据库管理系统中，**数据备份**不属于安全性控制机制（三种安全性机制：视图、数据加密、用户授权）。
- 数据库事务的并发操作会带来三个问题，下列哪个不是这三个问题**破坏事务原子性**（并发操作的三个问题：丢失更新、读脏数据、不一致分析）。
- SQL中的完整性约束机制中，**触发器**属于主动的约束机制。
- 关系模式R的属性个数为3，那么在R上可能成立的非平凡FD有**37**个（共FD有8*8=64个，平凡的有$3^n$=27个(n为属性个数)，非平凡的有64-27=37个）。
- 系统故障会造成**内部数据丢失**。
- 在对象关系模型中，属性可以是复合类型，其中同类型元素的有序集合称为**数组类型或列表**（无序的是多集和集合）。
- 分布式数据库系统中，如果各场地采用关系模型，但DBMS不同，则该系统属于**同构异质型**。
- 概念设计的主要目的是产生数据库概念结构，该结构主要反映**企业的组织信息需求**。
- 在对象联系图中，表示对象类型之间的超类和子类联系的是**双线箭头**。

#### 判断题：

- 【T】程序中，事务以BEGIN TRANSACTION开始，以COMMIT或ROLLBACK结束。
- 【T】在数据库中，把未提交的随后被撤销的数据称为脏数据。
- 【T】在分布式数据库系统中，定义各种分片时，须遵**守完备性条件、重构条件和不相交条件**。
- 【T】*数据库系统中，分片概念是指对内存分片*。
- 【T】如果X->Y,则X->->Y。函数依赖是多值依赖的一种。
- 【T】继承性是一种is a联系，表示数据间的细化关系。
- 【F】判断一个并发调度是否正确，可以用封锁概念来解决（可串行化解决）。
- 【F】在数据库分析阶段（逻辑设计）用数据依赖的概念来分析和表示各数据项之间的联系。
- 【T】ORDB系统是在传统的关系数据库技术中引入面向对象技术。
- 【T】事务串行调度的结果都是正确的，至于依何次序执行，视外界环境而定，系统无法预料。
- 【T】在事务T对某数据加上S锁后，仍允许其他事务再对该数据加S锁。
- 【T】3NF中的任何一个非平凡函数依赖FD X->Y，若X不是超键，则X必然是主属性。
- 【T】在事务依赖图中，如果两个事务的依赖关系形成一个循环，那么就会出现死锁现象。
- 【F】一个事务的所有操作要么都做，要么都不做。这是事务的一致性（原子性）。
- 【F】在概念结构设计中，先定义全局概念结构的框架，然后逐步细化。这种方法称为自底向上方法（自顶向下）。
- 【F】如果有部分依赖存在，则一定存在传递依赖。
- 【F】关系数据库设计理论主要包括数据依赖、范式、模式设计方法，其中模式设计方法（数据依赖）起着核心作用。
- 【T】一个好的模式设计应满足：**表达性、分离性及最小冗余性**。
- 【T】满足两段锁协议事务的任何一种并发调度都是正确的调度。
- 【F】在数据库设计中，子类与超类存在着一致性（继承性）联系。
- 【T】嵌套关系突破了1NF定义的限制。

#### 填空题：

- 泛关系模式可能存在**数据冗余、修改异常、插入异常、删除异常**等问题。
- 在关系模式设计时，各种数据之间的联系称为**数据依赖**。
- 数据库设计一般分为七个阶段：**规划、需求分析、概念设计、逻辑设计、物理设计、实现、运行和维护**。
- 概念设计阶段的主要任务是根据**需求分析**的结果找出所有数据实体，画出相应的ER图。
- 5个事务的并行调度最多可能有**120**种不同的正确的运行结果。
- 数据库恢复的实现技术有**数据转储和建立日志文件**。
- 数据库中完整性一词是指数据的**正确性、有效性、相容性**。
- 一个分布式数据库系统是用**通信网络**连接起来的结点的集合，每个结点都是拥有集中式数据库的计算机系统。







#### 第五章 规范化设计

- 5.2 函数依赖的概念
  - 求第几范式
  - 属性集的闭包
  - 最小函数依赖集
  - 候选键
- 5.3 关系模式的分解
  - 如何判断无损分解：
    - 画表格、填AB
    - 关系模式是2个时，R1^R2=R1-R2
  - 保持函数依赖的分解
    - 投影完并起来，与F等价
- 5.4 范式
  - 给出关系模式和函数依赖集，会判断第几范式并给出理由
  - 分解成保持函数依赖的第三范式
  - 无损分解
  - 无损分解成BCNF范式
  - 表达性、分离性、最小冗余性

##### 大题

- 会求所候选键
- 根据候选键判断是第几范式
- 判断一个分解是否是无损分解
- 是否是保持函数依赖的分解
- 求最小函数依赖集或判断是否等价
- 三个分解算法

#### 第七章 数据库设计（小题）

- 什么是软件生存期，有哪些部分，各个阶段的输入输出

  - 规划：确定系统范围，确定开发工作所需资源，估计软件开发成本，确定项目进度。

  - 需求分析：
    - 输入：总体信息需求和处理需求
    - 输出：**需求说明书包括数据流程图和数据字典**


  - 概念设计（**数据库设计关键阶段**）：**产生反映企业组织信息需求的数据库概念结构，独立于DBMS。**
    - **绘制ER模型**
    - 概念设计主要步骤：
      - 进行数据抽象，设计局部概念模式
      - 局部概念模式综合成全局概念模式
      - 评审
    - 数据抽象包括：聚集（包括各种数据项信息）和概括（子类父类）
    - ER模型中实体类型的分割：垂直分割、水平分割。
    - 采用ER进行数据库概念设计：
      - 局部ER模式
      - 全局ER模式、
        - 消除冲突：
          - 属性冲突（如取值范围不同）
          - 结构冲突（实体成为属性）
          - 命名冲突（属性、实体和联系名）
      - 全局ER模式优化
  - 逻辑设计：
    - 输入：独立于DBMS的概念模式。
    - 步骤：
      - 形成初始模式
      - 设计子模式
      - 设计应用程序梗概
      - 模式评价
      - 修改模式
    - 进行规范化处理。
    - 输出：DBMS可处理的模式和子模式，物理设计指南。
  - 物理设计：
    - 完整性和安全性考虑
    - 存储记录结构设计
    - 存取方法设计

- 概念设计的重要性

- 消除冲突：属性冲突、结构冲突、命名冲突

- 逻辑设计、物理设计包含的内容

- 规范化设计在**逻辑设计阶段**最多 

#### 第八章 数据库管理

- 事务的定义 

  - 事务的ACID性质
    - 原子性:A向B转账，要么成功，要么都回滚
    - 一致性：库存数量不能为负数
    - 隔离性：两个用户同时购买同一航班最后一张票
    - 持久性：体骄傲数据后永久保存

- 故障恢复

  - 数据库恢复的基本方法：**转储、建立日志文件**
    - 三种故障类型：系统故障为软故障，介质故障为硬故障
      - 事务故障：直接撤销事务来解决
      
        - 可预期的事务故障，如余额透支等。
      
          在事务代码中加入判断和ROLLBACK语句，当事务执行到ROLLBACK语句时，由系统对事务进行UNDO回退操作。
      
      - 系统故障：找出REDO、UNDO的事务
        - 已提交的，但更新还留在缓冲区的事务进行REDO
        - 未完成的事务进行UNDO
      
      - 介质故障
      
        重装转储的后备副本到新磁盘，在日志中找出转储以后已提交的的事务，对这些事务进行REDO处理，将数据库恢复到故障前某一时刻的正确状态。

  - 运行记录优先原则：

    - 相应运行记录已经写入运行日志后，才允许向数据库中写记录。
    - 事务的所有运行记录都写入运行日志后，才允许事务COMMIT

- 并发控制

  - 三个问题：丢失更新，读脏数据，不一致性分析问题
  - 封锁机制：
    - X锁，S锁，事务提交后解除锁。
    - 活锁：某个事务一直在等待，饥饿现象，并没有死锁。解决办法：先来先服务队列。
    - 死锁：一方抢了一半，事务以来图存在环就是死锁。
  - n个事务进行串行调度，可有n!种不同有效调度，结果就可能有n!种。

- 完整性

  - 外键

    ```sql
    # 外键的完整性定义写法
    foreign key (sno) referrences s(sno) on delete cascade
    ```

    RESTRICT和CASCADE是外键约束的两种重要参照动作，用于定义当主表（被引用表）的数据被删除时，子表（引用表）的关联数据如何处理。

    - RESTRICT：如果子表存在匹配的外键记录，拒绝删除或更新
    - CASCADE：主表删除或更新时，自动删除或更新子表中关联的外键记录。

  - 断言

    ```sql
    # 断言的写法
    create assertion ass check(2>=all(select count(distinct hno) from v group by id,vdate,dno));
    ```

  - 触发器：

    - 三种事件：insert,update,delete
    - 三要素：事件、条件、动作。
    - 如果有多条SQL语句，使用BEGIN ATOMIC...END限定
    - FOR EACH ROW是元组级触发器。
    
    ```sql
    # 触发器的写法
    create trigger tri after insert on V referencing new as newtuple for each row when newtuple.type='住院' update H set beds=beds-1 where hno=newtuple.hno;
    ```
    
    

- 安全性

  - 视图

  - 授权

    ```sql
    # 授权语句，同时张三获得转授权
    grant select on V to 张三 with grant option;
    ```

    

  - 加密


#### 第九章 分布式数据库系统

- DDBS(Distributed Data Base System)定义：一个分布式系统是由通信网络连接起来的节点（场地）的集合，每个节点都是拥有集中式数据库的计算机系统。
  - 大圆圈在网络角度称为节点，在数据库技术中称为场地。
  - 区分一个系统是分布式还是分散式，就判断系统是否支持全局应用。全局应用是指设计两个或以上场地中数据库的应用。
  - DDBS是物理上分散逻辑上集中的数据库系统。

- DDBS基本特点：
  - 物理分布性
  - 逻辑整体性
  - 场地自治性
  - 场地之间协作性
- DDBS分类：
  - 同构同质：同一数据模型，同一DBMS
  - 同构异质：同一数据模型（如关系型数据库），不同DBMS
  - 异构异质：不同数据模型，不同DBMS
- 数据存储：先数据分片，再数据分配
  - 数据分片：
    - 水平分片：选择操作。通过并操作恢复。
    - 垂直分片：投影操作。每个片段要包含候选键，通过自然连接恢复。
    - 导出分片：水平分片的条件不是本关系属性的条件，而是其他关系属性的条件。
    - 混合分片
  - 定义分片时遵守的规则：
    - 完备性条件：不遗漏。
    - 可重构条件：能恢复。
    - 不相交条件：水平不重叠，垂直只含主键重叠。
  - 数据分配：四种策略，四个评价指标：存储代价、可靠性、检索代价、更新代价。
    - 集中式：容易控制，容易形成瓶颈，可靠性差。
    - 分割式：所有数据只有一份。
    - 全复制式：可靠性最高，响应速度快，但数据同步复杂且代价高。
    - 混合式：介于分割式和全复制式
  - DDB六层结构：
    - 全局外模式
    - 全局概念模式（逻辑数据独立性）
    - 分片模式（分片透明性）
    - 分配模式（位置透明性）
    - 局部概念模式（局部数据模型透明性）
    - 局部内模式（物理数据独立性）

#### 第十章 对象关系数据库

- 数据模型的演变：

  - 平面关系模型：属性都是基本数据类型。
  - 嵌套关系模型：数据可以是基本数据类型，也可以是关系类型，且数据结构可以多次嵌套。
  - 复合对象模型：属性可以是基本数据类型，关系类型，元组类型，也可多次嵌套。
  - 面向对象模型

- 面向对象数据类型：

  - 基本类型

  - 复合类型：

    - 行类型（元组类型）：不同类型元素的有序集合。
    - 聚类类型：

    |        类型        | 是否有序 | 元素重复性 | 元素个数 |            例子            |
    | :----------------: | :------: | :--------: | :------: | :------------------------: |
    |       数组[]       |   有序   |    允许    |   预置   | [1,2,1]和[2,1,1]是不同数组 |
    |      列表list      |   有序   |    允许    |  不预置  | {1,2,1}和{2,1,1}是不同列表 |
    | 包（多集）multiset |   无序   |    允许    |  不预置  | {1,2,1}和{2,1,1}是相同的包 |
    |     集合setof      |   无序   |   不允许   |  不预置  |   {1,2}和{2,1}是相同集合   |

    

  - 数组，列表，包，集合统称为**聚集**类型。





